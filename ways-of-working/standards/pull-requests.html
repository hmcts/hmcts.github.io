<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Pull requests - HMCTS</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://hmcts.github.io/ways-of-working/standards/pull-requests.html">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="hmcts.github.io" />
      <meta name="twitter:image" content="https://hmcts.github.io/images/govuk-large.png" />
      <meta name="twitter:title" content="Pull requests - HMCTS" />
      <meta name="twitter:url" content="https://hmcts.github.io/ways-of-working/standards/pull-requests.html" />

      <meta property="og:image" content="https://hmcts.github.io/images/govuk-large.png" />
      <meta property="og:site_name" content="HMCTS" />
      <meta property="og:title" content="Pull requests" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://hmcts.github.io/ways-of-working/standards/pull-requests.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://github.com/hmcts" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          HMCTS
        </span>
      </a>
        <strong class="govuk-tag">Live</strong>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://hmcts-reform.slack.com/app_redirect?channel=platops-help">Support</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Documentation</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/hmcts">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://hmcts.github.io"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="/"><span>The HMCTS way</span></a>
  </li>
<li><a href="/onboarding/"><span>Platform onboarding</span></a>
<ul>
<li><a href="/onboarding/team/"><span>Team</span></a>
<ul>
  <li>
    <a href="/onboarding/team/azuread.html"><span>Azure AD</span></a>
  </li>
  <li>
    <a href="/onboarding/team/slack.html"><span>Slack</span></a>
  </li>
  <li>
    <a href="/onboarding/team/office365.html"><span>Office 365</span></a>
  </li>
  <li>
    <a href="/onboarding/team/github.html"><span>GitHub</span></a>
  </li>
  <li>
    <a href="/onboarding/team/jenkins.html"><span>Jenkins</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="/onboarding/person/"><span>Person</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="/glossary/"><span>Glossary</span></a>
  </li>
<li><a href="/information-security/"><span>Information security</span></a>
<ul>
  <li>
    <a href="/information-security/certificate-automation.html"><span>TLS certificates</span></a>
  </li>
</ul>
</li>
<li><a href="/ways-of-working/"><span>Ways of working</span></a>
<ul>
<li><a href="/ways-of-working/standards/"><span>Concepts and standards</span></a>
<ul>
  <li>
    <a href="/ways-of-working/standards/environments.html"><span>Environments</span></a>
  </li>
  <li>
    <a href="/ways-of-working/standards/pull-requests.html"><span>Pull requests</span></a>
  </li>
  <li>
    <a href="/ways-of-working/standards/apis.html"><span>API design</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="/ways-of-working/principles/"><span>Principles</span></a>
  </li>
<li><a href="/ways-of-working/path-to-live/"><span>Path to live</span></a>
<ul>
  <li>
    <a href="/ways-of-working/path-to-live/front-door.html"><span>Front Door configuration</span></a>
  </li>
  <li>
    <a href="/ways-of-working/path-to-live/tls-certificates.html"><span>TLS certificates</span></a>
  </li>
  <li>
    <a href="/ways-of-working/path-to-live/shutter.html"><span>Shutter Implementation and Design</span></a>
  </li>
  <li>
    <a href="/ways-of-working/path-to-live/load-balancer-configuration.html"><span>Load balancer configuration</span></a>
  </li>
  <li>
    <a href="/ways-of-working/path-to-live/public-dns.html"><span>Public DNS</span></a>
  </li>
</ul>
</li>
<li><a href="/ways-of-working/common-pipeline/"><span>The common pipeline</span></a>
<ul>
<li><a href="/ways-of-working/common-pipeline/publishing-libraries/"><span>Publishing Libraries</span></a>
<ul>
  <li>
    <a href="/ways-of-working/common-pipeline/publishing-libraries/nodejs.html"><span>Node.js</span></a>
  </li>
  <li>
    <a href="/ways-of-working/common-pipeline/publishing-libraries/java.html"><span>Java</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="/ways-of-working/common-pipeline/tips_and_tricks.html"><span>Tips and Tricks</span></a>
  </li>
  <li>
    <a href="/ways-of-working/common-pipeline/common-pipeline.html"><span>Common pipeline</span></a>
  </li>
</ul>
</li>
<li><a href="/ways-of-working/new-component/"><span>Starting a new component</span></a>
<ul>
  <li>
    <a href="/ways-of-working/new-component/github-repo.html"><span>Create a Github Repository</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/infrastructure-as-code.html"><span>Infrastructure as Code</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/helm-chart.html"><span>Helm chart</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/secrets-management.html"><span>Secrets Management</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/flux-v1.html"><span>Flux-V1</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/gitops-flux.html"><span>GitOps</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/elasticsearch.html"><span>ElasticSearch</span></a>
  </li>
  <li>
    <a href="/ways-of-working/new-component/feature-flags.html"><span>Feature flags</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="/ways-of-working/asking-for-help/"><span>Asking for help</span></a>
  </li>
<li><a href="/ways-of-working/guides/"><span>Guides</span></a>
<ul>
  <li>
    <a href="/ways-of-working/guides/connect-via-vpn.html"><span>Make a new Virtual Network accessible over the VPN</span></a>
  </li>
  <li>
    <a href="/ways-of-working/guides/profile-java-app-in-aks.html"><span>Profile a Java application running in an AKS cluster</span></a>
  </li>
</ul>
</li>
<li><a href="/ways-of-working/troubleshooting/"><span>Troubleshooting issues</span></a>
<ul>
  <li>
    <a href="/ways-of-working/troubleshooting/fluxV1.html"><span>Flux V1</span></a>
  </li>
</ul>
</li>
</ul>
</li>
  <li>
    <a href="/api-docs/"><span>API Documentation</span></a>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="pull-requests">Pull requests</h1>
<p>As a PR writer I will:</p>

<ul>
<li>keep PRs small</li>
</ul>
<p>As a PR reviewer I will:</p>

<ul>
<li>make an effort to review as soon as I get a second.</li>
<li>approve, as long as itâ€™s better than before</li>
<li>favour suggestions over rejections, particularly when a multipart PR is indicated</li>
</ul>
<p>We practise code review on all changes at HMCTS to:</p>

<ul>
<li>improve code quality</li>
<li>get team buy in on changes</li>
<li>validate change correctness</li>
<li>knowledge sharing</li>
</ul>
<p>Pull requests should not be opened when everything is finished.
They should be opened as soon as you have something to show.</p>
<p>Leaving it to the last minute leaves a lot of pressure to the reviewer, 
often someone is told the code is done but they arenâ€™t 
told that the review hasnâ€™t happened, pressure comes on to ship the code but thereâ€™s design problems
 in it that need addressing, this could take hours, or days.</p>
<h2 id="size">Size</h2>
<p>The smaller your pull request the easier it is to review, to test and the safer it is to send to production.
Separating your changes out is a great skill to practice, some tips:</p>

<ul>
<li>donâ€™t make unrelated changes in a PR, you should still make the change if you think it improves the code
Just take the 10 minutes to create a new branch and open a separate PR, it can be quickly merged and you can continue with your task</li>
<li>refactor the code to make your change easier first</li>
<li>avoid unrelated whitespace changes if possible, they distract the reviewer and can cause conflicts with other people working in similar areas</li>
<li>look at the code before you start coding and see roughly what you need to do, perhaps do this with another developer, this can also make the review easier that on
if two developers were involved in the design thereâ€™s more buy in</li>
<li>mention in your PR description that there is going to be more PRs and what is still to come</li>
</ul>
<h2 id="when-should-review-happen">When should review happen</h2>
<p>Reviews need to happen often, otherwise you will build up a backlog of changes.
Before you start your task for the day check all the open PRs to see if thereâ€™s any code that needs a review or if someone needs a bit of help.</p>
<p>The daily reminder can be automated with the GitHub Slack integration.</p>
<p>A GitHub team maintainer can go to their <a href="https://github.com/orgs/hmcts/teams?type=source">GitHub teams settings</a>, click &lsquo;Scheduled reminders&rsquo;
and configure daily reminders for all of your teams pull requests.
See also GitHub&rsquo;s documentation on <a href="https://docs.github.com/en/github/setting-up-and-managing-organizations-and-teams/managing-scheduled-reminders-for-your-team#creating-a-scheduled-reminder-for-a-team">scheduled reminders</a>.</p>
<p>But importantly reviews should not happen just first thing in the morning, 
they should be done after every break, before you start a new ticket or after youâ€™ve opened a PR yourself.</p>
<p>Once you make your review comments especially if you block the merge you need to be ready to respond quickly to follow up comments so as not to hold up the person who has created the PR.</p>
<h2 id="who-should-review">Who should review</h2>
<p>All developers in the team should be reviewing, junior developers to tech lead.
Code review isnâ€™t just about improving the code and the solution being correct, it is also about 
sharing knowledge of the code and different techniques that can be used in software engineering.</p>
<p>If you know that someone has particular experience in an area, send the PR to them and ask if they would be able to review it when they have time.</p>
<h2 id="review-techniques">Review techniques</h2>

<ul>
<li>think &ldquo;how could I make it easier for myself if I was reviewing it?&rdquo;</li>
<li>pre-empt the reviewer by explaining (as comments) on your PR any compromises / or limitations that your implementation has</li>
<li>if thereâ€™s conflict occurring on the PR on the next steps to proceed on it, take it offline, go sit next to the person, chat on slack or call them
agree the next step, and involve someone else if needed, post the result on the PR so that other people can see why the direction has changed.</li>
</ul>
<h2 id="how-long-should-a-pr-be-open">How long should a PR be open</h2>
<p>Pull requests should be small and often, if it is open for more than 2-3 days there is probably something wrong.
It is much better to have work flowing quickly than a backlog of work building up.
Youâ€™re introducing a much riskier change and will have to do a lot more work to get it merged, satisfying reviewers
and resolving conflicts due to other peopleâ€™s merges.</p>
<h2 id="tooling-to-help">Tooling to help</h2>
<h3 id="stale-prs">Â Stale PRs</h3>
<p>In order to reduce the length of time PRs are open, 
the cognitive load on having to see them all the time, 
wonder whether they should be merged, and the cost of running any infrastructure related to the PRs.</p>
<p>We use <a href="https://probot.github.io/apps/stale/">probot-stale</a> to automate reminders about PRs and close them if no response or further work happens on it.</p>
<p>We recommend config like:</p>
<div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="c1"># Number of days of inactivity before an issue becomes stale</span>
<span class="na">daysUntilStale</span><span class="pi">:</span> <span class="m">7</span>
<span class="c1"># Number of days of inactivity before a stale issue is closed</span>
<span class="na">daysUntilClose</span><span class="pi">:</span> <span class="m">4</span>
<span class="c1"># Issues with these labels will never be considered stale</span>
<span class="na">exemptLabels</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">pinned</span>
  <span class="pi">-</span> <span class="s">dependencies</span>
<span class="c1"># Label to use when marking an issue as stale</span>
<span class="na">staleLabel</span><span class="pi">:</span> <span class="s">stale</span>
<span class="c1"># Comment to post when marking an issue as stale. Set to `false` to disable</span>
<span class="na">markComment</span><span class="pi">:</span> <span class="pi">&gt;</span>
  <span class="s">This issue has been automatically marked as stale because it has not had</span>
  <span class="s">recent activity. It will be closed if no further activity occurs. Thank you</span>
  <span class="s">for your contributions.</span>
<span class="c1"># Comment to post when closing a stale issue. Set to `false` to disable</span>
<span class="na">closeComment</span><span class="pi">:</span> <span class="pi">&gt;</span>
  <span class="s">This issue is being closed automatically as it was stale</span>
</code></pre></div><p>You can tune the numbers slightly but please make sure pull requests are closed within 2 weeks
If you have a PR that needs to stay around because you are demoing it or some other valid reason
you can add to the configuration a permanent label such as <code>demoing</code> this will never become stale</p>
<p>These should be reviewed regularly and closed if no longer required.</p>
<p>Note that you donâ€™t have to finish the PR within the period you set, it is the time from the last commit or activity on the PR
and you can add a comment or remove the label on the PR if it is not actually stale.</p>
<h3 id="templates-for-prs">Templates for PRs</h3>
<p>Our standard template for PRs is:</p>
<div class="highlight"><pre class="highlight markdown" tabindex="0"><code><span class="gs">**Before creating a pull request make sure that:**</span>
<span class="p">
-</span> [ ] commit messages are meaningful and follow good commit message guidelines
<span class="p">-</span> [ ] README and other documentation has been updated / added (if needed)
<span class="p">-</span> [ ] tests have been updated / new tests has been added (if needed)

Please remove this line and everything above and fill the following sections:<span class="sb">


</span><span class="gu">### JIRA link (if applicable) ###</span><span class="sb">



</span><span class="gu">### Change description ###</span>
<span class="c">&lt;!-- Include what your change is here, any testing you have done, etc --&gt;</span><span class="sb">


</span><span class="gs">**Does this PR introduce a breaking change?**</span> (check one with "x")

<span class="se">\`</span><span class="sb">`` (remove backslash and this comment when copy pasting)
[ ] Yes
[ ] No
\```</span>

</code></pre></div><p>You should start with this and adopt for your needs</p>
<h2 id="additional-reading">Additional reading</h2>
<p>Highly recommend reading at least the hackernoon article, some very good points there:</p>

<ul>
<li><a href="https://hackernoon.com/the-art-of-pull-requests-6f0f099850f9">https://hackernoon.com/the-art-of-pull-requests-6f0f099850f9</a></li>
<li><a href="https://www.atlassian.com/blog/git/written-unwritten-guide-pull-requests">https://www.atlassian.com/blog/git/written-unwritten-guide-pull-requests</a></li>
<li><a href="https://github.community/t5/Support-Protips/Best-practices-for-pull-requests/ba-p/4104">https://github.community/t5/Support-Protips/Best-practices-for-pull-requests/ba-p/4104</a></li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2022-04-25">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 25 October 2021.

        It needs to be reviewed again on 25 April 2022
        by the page owner <a href="https://hmcts-reform.slack.com/messages/platops-build-notices">platops-build-notices</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 25 April 2022
       by the page owner <a href="https://hmcts-reform.slack.com/messages/platops-build-notices">platops-build-notices</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/hmcts/hmcts.github.io/blob/source/source/ways-of-working/standards/pull-requests.html.md.erb">View source</a></li>
                <li><a href="https://github.com/hmcts/hmcts.github.io/issues/new?body=Problem+with+%27Pull+requests%27+%28https%3A%2F%2Fhmcts.github.io%2Fways-of-working%2Fstandards%2Fpull-requests.html%29&amp;labels=bug&amp;title=Re%3A+%27Pull+requests%27">Report problem</a></li>
                <li><a href="https://github.com/hmcts/hmcts.github.io">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-170132988-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('set', 'displayFeaturesTask', null);
  ga('set', 'transport', 'beacon');
  ga('set', 'page', location.pathname+location.search+location.hash);
  ga('send', 'pageview');
  </script>

    <script src="/javascripts/application.js"></script>
  </body>
</html>
