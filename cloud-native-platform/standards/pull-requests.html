<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Pull requests - HMCTS</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://hmcts.github.io/cloud-native-platform/standards/pull-requests.html">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="hmcts.github.io" />
      <meta name="twitter:image" content="https://hmcts.github.io/images/govuk-large.png" />
      <meta name="twitter:title" content="Pull requests - HMCTS" />
      <meta name="twitter:url" content="https://hmcts.github.io/cloud-native-platform/standards/pull-requests.html" />

      <meta property="og:image" content="https://hmcts.github.io/images/govuk-large.png" />
      <meta property="og:site_name" content="HMCTS" />
      <meta property="og:title" content="Pull requests" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://hmcts.github.io/cloud-native-platform/standards/pull-requests.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://github.com/hmcts" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          HMCTS
        </span>
      </a>
        <strong class="govuk-tag">Live</strong>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://hmcts-dts.slack.com/app_redirect?channel=platops-help">Support</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="../../">Documentation</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/hmcts">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://hmcts.github.io"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="../../index.html"><span>The HMCTS way</span></a>
  </li>
  <li>
    <a href="../../hmcts-overview/index.html"><span>HMCTS overview</span></a>
  </li>
<li><a href="../../cloud-native-platform/index.html"><span>Cloud Native Platform</span></a>
<ul>
<li><a href="../../cloud-native-platform/environments/index.html"><span>Environments</span></a>
<ul>
  <li>
    <a href="../../cloud-native-platform/environments/aks-auto-shutdown.html"><span>Environment schedule</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/environments/sandbox-cleardown.html"><span>Sandbox Cleardown</span></a>
  </li>
</ul>
</li>
<li><a href="../../cloud-native-platform/onboarding/index.html"><span>Onboarding</span></a>
<ul>
<li><a href="../../cloud-native-platform/onboarding/team/index.html"><span>Team</span></a>
<ul>
</ul>
</li>
  <li>
    <a href="../../cloud-native-platform/onboarding/person/index.html"><span>Person</span></a>
  </li>
</ul>
</li>
<li><a href="../../cloud-native-platform/standards/index.html"><span>Concepts and standards</span></a>
<ul>
</ul>
</li>
<li><a href="../../cloud-native-platform/common-pipeline/index.html"><span>The common pipeline</span></a>
<ul>
  <li>
    <a href="../../cloud-native-platform/common-pipeline/common-pipeline.html"><span>Common pipeline</span></a>
  </li>
<li><a href="../../cloud-native-platform/common-pipeline/publishing-libraries/index.html"><span>Publishing libraries</span></a>
<ul>
</ul>
</li>
</ul>
</li>
<li><a href="../../cloud-native-platform/new-component/index.html"><span>Starting a new component</span></a>
<ul>
  <li>
    <a href="../../cloud-native-platform/new-component/github-repo.html"><span>Create a Github Repository</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/infrastructure-as-code.html"><span>Infrastructure as Code</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/helm-chart.html"><span>Helm chart</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/secrets-management.html"><span>Secrets Management</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/gitops-flux.html"><span>GitOps</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/elasticsearch.html"><span>ElasticSearch</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/new-component/feature-flags.html"><span>Feature flags</span></a>
  </li>
</ul>
</li>
<li><a href="../../cloud-native-platform/path-to-live/index.html"><span>Path to live</span></a>
<ul>
  <li>
    <a href="../../cloud-native-platform/path-to-live/load-balancer-configuration.html"><span>Load balancer configuration</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/path-to-live/tls-certificates.html"><span>TLS certificates</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/path-to-live/public-dns.html"><span>Public DNS</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/path-to-live/front-door.html"><span>Front Door configuration</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/path-to-live/shutter.html"><span>Shutter Implementation and Design</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/path-to-live/oat.html"><span>Operational Acceptance Testing</span></a>
  </li>
</ul>
</li>
<li><a href="../../cloud-native-platform/guides/index.html"><span>Guides</span></a>
<ul>
</ul>
</li>
  <li>
    <a href="../../cloud-native-platform/glossary/index.html"><span>Glossary</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/troubleshooting/index.html"><span>Troubleshooting issues</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/asking-for-help/index.html"><span>Asking for help</span></a>
  </li>
  <li>
    <a href="../../cloud-native-platform/api-docs/index.html"><span>API Documentation</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="../../cjs-common-platform/index.html"><span>CJS Common Platform</span></a>
  </li>
<li><a href="../../legacy/index.html"><span>Legacy applications</span></a>
<ul>
  <li>
    <a href="../../legacy/support/index.html"><span>Support and maintenance</span></a>
  </li>
  <li>
    <a href="../../legacy/knowledgebase/index.html"><span>Knowledgebase</span></a>
  </li>
</ul>
</li>
<li><a href="../../standards/index.html"><span>Standards</span></a>
<ul>
<li><a href="../../standards/principles/index.html"><span>Principles</span></a>
<ul>
  <li>
    <a href="../../standards/principles/continuous-delivery.html"><span>Continuous delivery</span></a>
  </li>
  <li>
    <a href="../../standards/principles/devops.html"><span>DevOps</span></a>
  </li>
  <li>
    <a href="../../standards/principles/programming.html"><span>Programming</span></a>
  </li>
  <li>
    <a href="../../standards/principles/test.html"><span>Testing</span></a>
  </li>
</ul>
</li>
<li><a href="../../standards/practices/index.html"><span>Practices</span></a>
<ul>
  <li>
    <a href="../../standards/practices/frontend.html"><span>Frontend applications</span></a>
  </li>
  <li>
    <a href="../../standards/practices/backends.html"><span>Backend applications</span></a>
  </li>
  <li>
    <a href="../../standards/practices/apis.html"><span>APIs</span></a>
  </li>
  <li>
    <a href="../../standards/practices/certificates.html"><span>Certificates</span></a>
  </li>
</ul>
</li>
<li><a href="../../standards/standards/index.html"><span>Standards</span></a>
<ul>
  <li>
    <a href="../../standards/standards/angular.html"><span>Angular</span></a>
  </li>
  <li>
    <a href="../../standards/standards/java.html"><span>Java</span></a>
  </li>
  <li>
    <a href="../../standards/standards/cookies.html"><span>Cookies</span></a>
  </li>
  <li>
    <a href="../../standards/standards/typescript.html"><span>TypeScript</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="../../standards/technology-stack/index.html"><span>Technology stack</span></a>
  </li>
</ul>
</li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content" tabindex="0">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="pull-requests">Pull requests</h1>
<p>As a PR writer I will:</p>

<ul>
<li>keep PRs small</li>
</ul>
<p>As a PR reviewer I will:</p>

<ul>
<li>make an effort to review as soon as I get a second.</li>
<li>approve, as long as it’s better than before</li>
<li>favour suggestions over rejections, particularly when a multipart PR is indicated</li>
</ul>
<p>We practise code review on all changes at HMCTS to:</p>

<ul>
<li>improve code quality</li>
<li>get team buy in on changes</li>
<li>validate change correctness</li>
<li>knowledge sharing</li>
</ul>
<p>Pull requests should not be opened when everything is finished.
They should be opened as soon as you have something to show.</p>
<p>Leaving it to the last minute leaves a lot of pressure to the reviewer,
often someone is told the code is done but they aren’t
told that the review hasn’t happened, pressure comes on to ship the code but there’s design problems
 in it that need addressing, this could take hours, or days.</p>
<h2 id="size">Size</h2>
<p>The smaller your pull request the easier it is to review, to test and the safer it is to send to production.
Separating your changes out is a great skill to practice, some tips:</p>

<ul>
<li>don’t make unrelated changes in a PR, you should still make the change if you think it improves the code
Just take the 10 minutes to create a new branch and open a separate PR, it can be quickly merged and you can continue with your task</li>
<li>refactor the code to make your change easier first</li>
<li>avoid unrelated whitespace changes if possible, they distract the reviewer and can cause conflicts with other people working in similar areas</li>
<li>look at the code before you start coding and see roughly what you need to do, perhaps do this with another developer, this can also make the review easier that on
if two developers were involved in the design there’s more buy in</li>
<li>mention in your PR description that there is going to be more PRs and what is still to come</li>
</ul>
<h2 id="when-should-review-happen">When should review happen</h2>
<p>Reviews need to happen often, otherwise you will build up a backlog of changes.
Before you start your task for the day check all the open PRs to see if there’s any code that needs a review or if someone needs a bit of help.</p>
<p>The daily reminder can be automated with the GitHub Slack integration.</p>
<p>A GitHub team maintainer can go to their <a href="https://github.com/orgs/hmcts/teams?type=source">GitHub teams settings</a>, click &lsquo;Scheduled reminders&rsquo;
and configure daily reminders for all of your teams pull requests.
See also GitHub&rsquo;s documentation on <a href="https://docs.github.com/en/github/setting-up-and-managing-organizations-and-teams/managing-scheduled-reminders-for-your-team#creating-a-scheduled-reminder-for-a-team">scheduled reminders</a>.</p>
<p>But importantly reviews should not happen just first thing in the morning,
they should be done throughout the day, after a break is a good time to do them, also before you start a new ticket or after you’ve opened a PR yourself.</p>
<p>Once you submit your review comments, and especially if you block the merge, you need to be ready to respond quickly to follow up comments so as not to hold up the person who has created the pull request.</p>
<h2 id="who-should-review">Who should review</h2>
<p>All developers in the team should be reviewing, junior developers to tech lead.
Code review isn’t just about improving the code and the solution being correct, it is also about
sharing knowledge of the code and different techniques that can be used in software engineering.</p>
<p>If you know that someone has particular experience in an area, send the PR to them and ask if they would be able to review it when they have time.</p>
<h2 id="review-techniques">Review techniques</h2>

<ul>
<li>think &ldquo;how could I make it easier for myself if I was reviewing it?&rdquo;</li>
<li>pre-empt the reviewer by explaining (as comments) on your PR any compromises / or limitations that your implementation has</li>
<li>if there’s conflict occurring on the PR on the next steps to proceed on it, take it offline, go sit next to the person, chat on Slack or call them to
agree the next step, involve someone else if needed, post the result on the PR so that other people can see why the direction has changed.</li>
</ul>
<h2 id="how-long-should-a-pr-be-open">How long should a PR be open</h2>
<p>Pull requests should be small and often, if it is open for more than 2-3 days there is probably something wrong.
It is much better to have work flowing quickly than a backlog of work building up.
You’re introducing a much riskier change and will have to do a lot more work to get it merged, satisfying reviewers
and resolving conflicts due to other people’s merges.</p>
<h2 id="tooling-to-help">Tooling to help</h2>
<h3 id="stale-prs">Stale PRs</h3>
<p>In order to reduce the length of time PRs are open,
the cognitive load on having to see them all the time,
wonder whether they should be merged, and the cost of running any infrastructure related to the PRs.</p>
<p>We use <a href="https://github.com/marketplace/actions/close-stale-issues">Close Stale Issues</a> to automate reminders about PRs and close them if no response or further work happens on it.</p>
<p>We recommend config like:</p>
<div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="na">steps</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/stale@v5</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">repo-token</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
    <span class="na">stale-issue-message</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">This issue has been automatically marked as stale because it has not had</span>
      <span class="s">recent activity. It will be closed if no further activity occurs. Thank you</span>
      <span class="s">for your contributions.</span>
    <span class="na">stale-pr-message</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">This pull request has been automatically marked as stale because it has not had</span>
      <span class="s">recent activity. It will be closed if no further activity occurs. Thank you</span>
      <span class="s">for your contributions.</span>
    <span class="na">stale-issue-label</span><span class="pi">:</span> <span class="s1">'</span><span class="s">stale'</span>
    <span class="na">stale-pr-label</span><span class="pi">:</span> <span class="s1">'</span><span class="s">stale'</span>
    <span class="na">days-before-close</span><span class="pi">:</span> <span class="s1">'</span><span class="s">4'</span>
    <span class="na">days-before-stale</span><span class="pi">:</span> <span class="s1">'</span><span class="s">7'</span>
    <span class="na">exempt-pr-labels</span><span class="pi">:</span> <span class="s1">'</span><span class="s">pinned,dependencies'</span>
</code></pre></div><p>Source: <a href="https://github.com/hmcts/cnp-flux-config/blob/master/.github/workflows/stale.yml">hmcts/cnp-flux-config/.github/workflows/stale.yml</a></p>
<p>You can tune the numbers slightly but please make sure pull requests are closed within 2 weeks
If you have a PR that needs to stay around because you are using it for a demo or some other valid reason
you can add to the configuration a permanent label such as <code>pinned</code> this will never become stale</p>
<p>These should be reviewed regularly and closed if no longer required.</p>
<p>Note that you don’t have to finish the PR within the period you set, it is the time from the last commit or activity on the PR
and you can add a comment or remove the label on the PR if it is not actually stale.</p>
<h3 id="templates-for-prs">Templates for PRs</h3>
<p>Our standard template for PRs is stored in the <a href="https://github.com/hmcts/.github/blob/master/PULL_REQUEST_TEMPLATE.md">hmcts/.github configuration repository</a></p>
<p>All repositories in the organisation will automatically use this by default.</p>
<p>You should start with this and adopt for your needs as needed by copying it into repository in the <code>.github</code> folder and editing it.</p>
<h2 id="additional-reading">Additional reading</h2>
<p>We highly recommend reading at least the hackernoon article, some very good points there:</p>

<ul>
<li><a href="https://hackernoon.com/the-art-of-pull-requests-6f0f099850f9">https://hackernoon.com/the-art-of-pull-requests-6f0f099850f9</a></li>
<li><a href="https://www.atlassian.com/blog/git/written-unwritten-guide-pull-requests">https://www.atlassian.com/blog/git/written-unwritten-guide-pull-requests</a></li>
<li><a href="https://github.community/t5/Support-Protips/Best-practices-for-pull-requests/ba-p/4104">https://github.community/t5/Support-Protips/Best-practices-for-pull-requests/ba-p/4104</a></li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2024-04-19">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 19 October 2023.

        It needs to be reviewed again on 19 April 2024
        by the page owner <a href="https://hmcts-reform.slack.com/messages/platops-build-notices">platops-build-notices</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 19 April 2024
       by the page owner <a href="https://hmcts-reform.slack.com/messages/platops-build-notices">platops-build-notices</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/hmcts/hmcts.github.io/blob/source/source/cloud-native-platform/standards/pull-requests.html.md.erb">View source</a></li>
                <li><a href="https://github.com/hmcts/hmcts.github.io/issues/new?body=Problem+with+%27Pull+requests%27+%28https%3A%2F%2Fhmcts.github.io%2Fcloud-native-platform%2Fstandards%2Fpull-requests.html%29&amp;labels=bug&amp;title=Re%3A+%27Pull+requests%27">Report problem</a></li>
                <li><a href="https://github.com/hmcts/hmcts.github.io">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-170132988-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('set', 'displayFeaturesTask', null);
  ga('set', 'transport', 'beacon');
  ga('set', 'page', location.pathname+location.search+location.hash);
  ga('send', 'pageview');
  </script>

    <script src="../../javascripts/application.js"></script>
  </body>
</html>
